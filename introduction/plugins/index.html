<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Plugins · difys docs</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Plugins - Basic tutorial"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Plugins · difys docs"/><meta property="og:type" content="website"/><meta property="og:url" content="https://difysjs.github.io/"/><meta property="og:description" content="# Plugins - Basic tutorial"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css"/><script type="text/javascript" src="/scripts/sidebarScroll.js"></script><script type="text/javascript" src="/scripts/codeblock.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/difys.svg" alt="difys docs"/><h2 class="headerTitleWithLogo">difys docs</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/introduction/quick-start" target="_self">Quick Start</a></li><li class=""><a href="https://www.github.com/difysjs/difys" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Introduction</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Introduction<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/introduction/quick-start">Quick Start</a></li><li class="navListItem"><a class="navItem" href="/introduction/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/introduction/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/introduction/motivation">Motivation</a></li><li class="navListItem"><a class="navItem" href="/introduction/partners">Our Partners</a></li><li class="navListItem"><a class="navItem" href="/introduction/core">The Core</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/introduction/plugins">Plugins</a></li><li class="navListItem"><a class="navItem" href="/introduction/scripts">Scripts</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Scripting<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/scripting/scripting-api">Scripting API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Usage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/usage/guide">Usage guide</a></li><li class="navListItem"><a class="navItem" href="/usage/examples">Examples and tutorials</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Web API<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/web-api/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/web-api/routes">Routes</a></li><li class="navListItem"><a class="navItem" href="/web-api/examples">Examples</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/faq">Frequently asked questions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Other<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Protocol</h4><ul><li class="navListItem"><a class="navItem" href="/other/protocol/messages">Socket messages</a></li><li class="navListItem"><a class="navItem" href="/other/protocol/socket">Game socket</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="plugins---basic-tutorial"></a><a href="#plugins---basic-tutorial" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins - Basic tutorial</h1>
<p>Plugins are one of the core aspect Difys is built on, you could see it as an empty vessel without plugins.
If you are uncertain of some specific cases or have trouble making your plugin, please don't be shy and ask people in the <strong>#dev-general</strong> channel of our discord.</p>
<blockquote>
<p>You cannot make a plugin if you don't have the source code. That is why you need to be part of the dev team in order to follow this page.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="creating-your-core-files"></a><a href="#creating-your-core-files" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating your core files</h2>
<hr>
<h3><a class="anchor" aria-hidden="true" id="config"></a><a href="#config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>config</h3>
<p><code>src/config/plugins/MyAwesomePlugin.json</code></p>
<p>Your plugin config file must be in the config folder of difys.</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"disabled"</span>: <span class="hljs-literal">false</span>
}
</code></pre>
<hr>
<h3><a class="anchor" aria-hidden="true" id="package"></a><a href="#package" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>package</h3>
<p><code>~/plugin.json</code></p>
<p>It defines what our plugin is and what it needs.</p>
<pre><code class="hljs css language-json">{
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MyAwesomePlugin"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"author"</span>: <span class="hljs-string">"Zirpoo"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.0.1"</span>,
    <span class="hljs-attr">"requiredPlugins"</span>: [],
    <span class="hljs-attr">"dependencies"</span>: [],
    <span class="hljs-attr">"binaries"</span>: []
}
</code></pre>
<p><strong>name</strong></p>
<p>It should have the same as your folder name.</p>
<p><strong>description</strong></p>
<p>Just the big lines of what your plugin is going to achieve.</p>
<p><strong>author</strong></p>
<p>preferably the same as your discord name.</p>
<p><strong>version</strong></p>
<p>Since your plugin needs to be on gitlab or github, you need to show the version of your plugin.</p>
<p><strong>requiredPlugins</strong></p>
<p>If you use other plugins functions, you'll need to add the name of the plugin you need, just to be sure this plugin is initialized and not disabled.</p>
<p><strong>dependencies</strong></p>
<p>NodeJS dependencies your plugin will need.</p>
<p><strong>binaries</strong></p>
<p>Game data your plugin will need, here's the list:</p>
<p><code>AbuseReasons</code>
<code>AchievementCategories</code>
<code>AchievementObjectives</code>
<code>AchievementRewards</code>
<code>Achievements</code>
<code>ActionDescriptions</code>
<code>AlignmentBalance</code>
<code>AlignmentEffect</code>
<code>AlignmentGift</code>
<code>AlignmentOrder</code>
<code>AlignmentRank</code>
<code>AlignmentRankJntGift</code>
<code>AlignmentSides</code>
<code>AlignmentTitles</code>
<code>AlmanaxCalendars</code>
<code>Appearances</code>
<code>Areas</code>
<code>BidHouseCategories</code>
<code>Breeds</code>
<code>CensoredContents</code>
<code>CensoredWords</code>
<code>Challenge</code>
<code>ChatChannels</code>
<code>Documents</code>
<code>Dungeons</code>
<code>Effects</code>
<code>EmblemBackgrounds</code>
<code>EmblemSymbolCategories</code>
<code>EmblemSymbols</code>
<code>Emoticons</code>
<code>ExternalNotifications</code>
<code>Heads</code>
<code>HintCategory</code>
<code>Hints</code>
<code>Houses</code>
<code>Incarnation</code>
<code>IncarnationLevels</code>
<code>InfoMessages</code>
<code>Interactives</code>
<code>Items</code>
<code>ItemSets</code>
<code>ItemTypes</code>
<code>Jobs</code>
<code>LivingObjectSkinJntMood</code>
<code>MapCoordinates</code>
<code>MapPositions</code>
<code>MapReferences</code>
<code>MonsterMiniBoss</code>
<code>MonsterRaces</code>
<code>Monsters</code>
<code>MonsterSuperRaces</code>
<code>Months</code>
<code>MountBehaviors</code>
<code>MountBones</code>
<code>Mounts</code>
<code>Notifications</code>
<code>NpcActions</code>
<code>NpcMessages</code>
<code>Npcs</code>
<code>Ornaments</code>
<code>Pack</code>
<code>Pets</code>
<code>PresetIcons</code>
<code>QuestCategory</code>
<code>QuestObjectives</code>
<code>QuestObjectiveTypes</code>
<code>Quests</code>
<code>QuestStepRewards</code>
<code>QuestSteps</code>
<code>RankNames</code>
<code>Recipes</code>
<code>RideFood</code>
<code>ServerCommunities</code>
<code>ServerGameTypes</code>
<code>ServerPopulations</code>
<code>Servers</code>
<code>SkillNames</code>
<code>Skills</code>
<code>SkinMappings</code>
<code>Smileys</code>
<code>SoundBones</code>
<code>SoundUi</code>
<code>SoundUiHook</code>
<code>SpeakingItemsText</code>
<code>SpeakingItemsTriggers</code>
<code>SpellBombs</code>
<code>SpellLevels</code>
<code>Spells</code>
<code>SpellStates</code>
<code>SpellTypes</code>
<code>StealthBones</code>
<code>SubAreas</code>
<code>SubAreaIdPerCoordinate</code>
<code>SubAreasWorldMapData</code>
<code>SuperAreas</code>
<code>TaxCollectorFirstnames</code>
<code>TaxCollectorNames</code>
<code>Tips</code>
<code>TitleCategories</code>
<code>Titles</code>
<code>TypeActions</code>
<code>Url</code>
<code>WorldMaps</code></p>
<hr>
<h3><a class="anchor" aria-hidden="true" id="index"></a><a href="#index" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>index</h3>
<p><code>~/index.ts</code></p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> pluginPackage <span class="hljs-keyword">from</span> <span class="hljs-string">"./plugin.json"</span>;
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">"../../lib/logger"</span>;
<span class="hljs-keyword">import</span> Socket <span class="hljs-keyword">from</span> <span class="hljs-string">"../../module/game/connection"</span>;
<span class="hljs-keyword">import</span> Account <span class="hljs-keyword">from</span> <span class="hljs-string">"../../type/account"</span>;
<span class="hljs-keyword">import</span> { listenerFunction1 } <span class="hljs-keyword">from</span> <span class="hljs-string">"./events"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mount</span>(<span class="hljs-params"></span>) </span>{
    logger.info(<span class="hljs-string">`<span class="hljs-subst">${pluginPackage.name}</span> Plugin | Mounted`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hook</span>(<span class="hljs-params">account: Account</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">customFunction1</span>(<span class="hljs-params">socket: Socket</span>) </span>{
    <span class="hljs-comment">// Do something with the socket</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> listeners = [listenerFunction1];
</code></pre>
<p>Everything you export will be available to be used. It's much like public/private functions.</p>
<p><strong>mount</strong>() Boolean</p>
<p>This could be an async function and wait for data initialisation or any kind of requests.
if it returns false, then this account is ignored and is not going to be connected.</p>
<p><strong>hook</strong>(account) Boolean</p>
<p>This function is called when an account is added to the system.
if it returns false, then this account is ignored and is not going to be connected.</p>
<p><strong>listeners</strong> Function[]</p>
<p>List of events to listen on the socket.</p>
<hr>
<h3><a class="anchor" aria-hidden="true" id="events"></a><a href="#events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>events</h3>
<p><code>~/events.ts</code></p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> mongoose <span class="hljs-keyword">from</span> <span class="hljs-string">"mongoose"</span>;
<span class="hljs-keyword">import</span> pluginPackage <span class="hljs-keyword">from</span> <span class="hljs-string">"./plugin.json"</span>;
<span class="hljs-keyword">import</span> Socket <span class="hljs-keyword">from</span> <span class="hljs-string">"../../module/game/connection"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listenerFunction1</span>(<span class="hljs-params">data: unknown, socket: Socket</span>) </span>{
    <span class="hljs-keyword">const</span> username = socket.account.username;
    <span class="hljs-keyword">const</span> model = mongoose.models.MyModelName;
    model.findOneAndUpdate(
        {
            username,
            <span class="hljs-string">"data._messageType"</span>: data._messageType
        },
        { username, data },
        { upsert: <span class="hljs-literal">true</span> },
        <span class="hljs-function">(<span class="hljs-params">error, <span class="hljs-built_in">document</span>, result</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (error) {
                <span class="hljs-keyword">return</span> logger.error(
                    <span class="hljs-string">`<span class="hljs-subst">${pluginPackage.name}</span> Plugin | Couldn't save data into the database`</span>
                );
            }
        }
    );
}
</code></pre>
<p>Possibilities are endless and the concept of storing data in the database might frighten you, but I assure you it's a good idea. Since it makes possible for other plugins to read your data.</p>
<blockquote>
<p><strong>listenerFunction1</strong> is just an example, keep in mind that you <strong>must</strong> name your function the same as the event name you want to listen to.</p>
</blockquote>
<hr>
<h3><a class="anchor" aria-hidden="true" id="how-to-set-my-custom-model-into-mongoose-"></a><a href="#how-to-set-my-custom-model-into-mongoose-" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to set my custom model into mongoose ?</h3>
<p>You can create a file in <code>~/model/MyCustomModel.ts</code> and this file will be automatically detected by Difys.</p>
<p>Your model file must look like that:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> mongoose <span class="hljs-keyword">from</span> <span class="hljs-string">"mongoose"</span>;
<span class="hljs-keyword">const</span> Schema = mongoose.Schema;

mongoose.model(
    <span class="hljs-string">"MyCustomModel"</span>,
    <span class="hljs-keyword">new</span> Schema({
        <span class="hljs-comment">// My data</span>
    })
);
</code></pre>
<p>If you don't know how to build your schema object, I can suggest to look at the <a href="https://mongoosejs.com/docs/schematypes.html" target="_blank">mongoose</a> documentation.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/introduction/core"><span class="arrow-prev">← </span><span>The Core</span></a><a class="docs-next button" href="/introduction/scripts"><span>Scripts</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#creating-your-core-files">Creating your core files</a><ul class="toc-headings"><li><a href="#config">config</a></li><li><a href="#package">package</a></li><li><a href="#index">index</a></li><li><a href="#events">events</a></li><li><a href="#how-to-set-my-custom-model-into-mongoose-">How to set my custom model into mongoose ?</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/difys.svg" alt="difys docs" width="66" height="58"/></a><div><h5>Docs</h5><a href="/introduction/quick-start">Quick start</a><a href="/introduction/core">The Core</a><a href="/plugins/plugins-api">Plugins</a><a href="/scripting/scripting-api">Scripting</a></div><div><h5>Community</h5><a href="https://discord.gg/vgvgN2n" target="_blank" rel="noreferrer noopener">Discord</a><a href="http://cadernis.fr/" target="_blank" rel="noreferrer noopener">Cadernis</a></div><div><h5>More</h5><a href="https://github.com/difysjs/difys/">GitHub</a><a class="github-button" href="https://github.com/difysjs/difys" data-icon="octicon-star" data-count-href="/difysjs/difys/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 Difys team</section></footer></div></body></html>